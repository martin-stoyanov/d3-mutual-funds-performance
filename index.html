<html>
  <head>
      <script src="https://d3js.org/d3.v5.min.js"></script>
  </head>
  <style>
    .gridlines line {
      stroke: lightgray;
      stroke-opacity: 0.7;
    }

    .gridlines path {
      stroke-width: 0;
    }
    
  </style>
  <body>
    <div style = "margin-left: 30px; margin-right: 30px;">
      <svg id="line_chart" height="490" width="900" style="text-align:center; background: #fff;" ></svg>
      <script>
        // 2007-2019 performance of 20 of the best mutual funds from 1987-2007 compared to S&P500, from
        // https://www.thestreet.com/story/10385337/1/best-performing-funds-over-the-past-20-years.html
        // all funds on list except for VCAGX, can't find data on it

        const getFundsData = async () => {
          const funds = ["VGHCX", "KAUAX", "VGENX", "FPPTX", "FSCSX", "FCNTX",
            "UNSCX", "SLMCX", "FSLBX", "FSRBX", "VGRIX", "FSPCX", "LLPFX", "FSHCX", "FSVLX",
            "ETHSX", "MPGFX", "JAVLX", "SPECX", "^GSPC"];
          let historicalPrices = {};
          let fundData = {};
          let monthlyData = {};
        
          for await (const fund of funds) {
            monthlyData = {};
            let prices = await Promise.all([
              await d3.csv(`./datasets/${fund}.csv`)
            ]);
            prices[0].forEach( (month) => {
              if(!(month.Close === "null")){
                monthlyData[month.Date] = Number(month.Close);
              }
            });

            historicalPrices[fund] = monthlyData;
            //console.log(historicalPrices);
          };
          return historicalPrices;
        }
        
        getFundsData().then( (data) => {
          console.log(data);
        });

      </script>
    </div>
  </body>
</html>